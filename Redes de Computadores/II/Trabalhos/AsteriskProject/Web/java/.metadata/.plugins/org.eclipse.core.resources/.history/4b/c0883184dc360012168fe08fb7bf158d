package redes2;

import java.util.ArrayList;
import java.util.List;

public class EXTContextFacade {
	private static List<EXTContext> contexts = new ArrayList<EXTContext>();

	public static List<EXTContext> getExtContext() {
		if (contexts.isEmpty()) {
			ArrayList<String> commands;
			ArrayList<EXTContextProcedure> procedures = new ArrayList<EXTContextProcedure>();
			EXTContext context;

			commands = new ArrayList<String>();
			commands.add("Answer()");
			commands.add("MusicOnHold(default,90)");
			commands.add("Hangup()");
			procedures.add(new EXTContextProcedure("*35_", commands));

			commands = new ArrayList<String>();
			commands.add("Answer()");
			commands.add("MusicOnHold(default,90)");
			commands.add("Hangup()");
			procedures.add(new EXTContextProcedure("*1", commands));

			context = new EXTContext("general", procedures);

			commands = new ArrayList<String>();
			commands.add("Answer()");
			commands.add("MusicOnHold(default,90)");
			commands.add("Hangup()");
			procedures.add(new EXTContextProcedure("*1_", commands));

			commands = new ArrayList<String>();
			commands.add("Answer()");
			commands.add("MusicOnHold(default,90)");
			commands.add("Hangup()");
			procedures.add(new EXTContextProcedure("*2", commands));

			context = new EXTContext("LOCAL", procedures);

			contexts.add(context);
		}
		return contexts;
	}

	public static void addExtContext(EXTContext extContext) {
		getExtContext().add(extContext);
	}

	public static void deleteExtContext(String extContextId) {
		EXTContext toRemove = null;

		for (EXTContext extContext : getExtContext()) {
			if (extContext.isSame(extContextId)) {
				toRemove = extContext;
			}
		}
		if (toRemove != null) {
			getExtContext().remove(toRemove);
		}
	}

	public static void updateExtContext(EXTContext extContext) {
		updateExtContext(extContext.getId(), extContext);
	}

	public static void updateExtContext(String extContextId,
			EXTContext extContext) {
		deleteExtContext(extContextId);
		addExtContext(extContext);
	}

	public static EXTContext getExtContextIaxRamal(String extContextId) {
		for (EXTContext extContext : getExtContext()) {
			if (extContext.isSame(extContextId)) {
				return extContext;
			}
		}
		return null;
	}
}