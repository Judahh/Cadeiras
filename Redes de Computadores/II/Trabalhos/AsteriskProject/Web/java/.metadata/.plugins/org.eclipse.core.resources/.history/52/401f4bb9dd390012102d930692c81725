package redes2;

import java.util.ArrayList;
import java.util.List;

public class IAXRamalFacade {
	private static List<IAXRamal> ramais = new ArrayList<IAXRamal>();

	// private static Iax iax = new IaxImp();
	// private static boolean fake = true;

	public static List<IAXRamal> getIaxRamais() {
		// if (fake) {
		if (ramais.isEmpty()) {
			for (int i = 0; i < 3; i++) {
				ramais.add(new IAXRamal("IAX-460" + i, "Ramal <3000>",
						"friend", "3000", "lab$3000", "LOCAL", "dynamic",
						"md5", "yes", "no"));
			}
		}
		return ramais;
		// } else {
		// List<IAXRamal> toReturn = new ArrayList<IAXRamal>();
		// for (int i = 0; i < iax.getNumberOfSessions(); i++) {
		// String sessionName = iax.getSessionName(i);
		// String callerid = iax.getVariableValue(sessionName, "callerid");
		// String type = iax.getVariableValue(sessionName, "type");
		// String defaultuser = iax.getVariableValue(sessionName,
		// "defaultuser");
		// String secret = iax.getVariableValue(sessionName, "secret");
		// String context = iax.getVariableValue(sessionName, "context");
		// String host = iax.getVariableValue(sessionName, "host");
		// String auth = iax.getVariableValue(sessionName, "auth");
		// String transfer = iax.getVariableValue(sessionName, "transfer");
		// String requiredcalltoken = iax.getVariableValue(sessionName,
		// "requiredcalltoken");
		// toReturn.add(new IAXRamal(sessionName, callerid, type, defaultuser,
		// secret, context, host, auth, transfer, requiredcalltoken));
		// }
		// return toReturn;
		// }
	}

	public static void addIaxRamal(IAXRamal iaxRamal) {
		// if (fake) {
		getIaxRamais().add(iaxRamal);
		// } else {
		// String id = iaxRamal.getId();
		// String callerid = iaxRamal.getCallerid();
		// String type = iaxRamal.getType();
		// String defaultuser = iaxRamal.getDefaultuser();
		// String secret = iaxRamal.getSecret();
		// String context = iaxRamal.getContext();
		// String host = iaxRamal.getHost();
		// String auth = iaxRamal.getAuth();
		// String transfer = iaxRamal.getTransfer();
		// String requiredcalltoken = iaxRamal.getRequiredcalltoken();
		//
		// iax.addSession(id);
		// iax.addVariable(id, "callerid", callerid);
		// iax.addVariable(id, "type", type);
		// iax.addVariable(id, "defaultuser", defaultuser);
		// iax.addVariable(id, "secret", secret);
		// iax.addVariable(id, "context", context);
		// iax.addVariable(id, "host", host);
		// iax.addVariable(id, "auth", auth);
		// iax.addVariable(id, "transfer", transfer);
		// iax.addVariable(id, "requiredcalltoken", requiredcalltoken);
		// }
	}

	public static void deleteIaxRamal(String iaxRamalId) {
		// if (fake) {
		IAXRamal toRemove = null;
		for (IAXRamal iaxRamal : getIaxRamais()) {
			if (iaxRamal.isSame(iaxRamalId)) {
				toRemove = iaxRamal;
			}
		}
		if (toRemove != null) {
			getIaxRamais().remove(toRemove);
		}
		// } else {
		// iax.removeSession(iaxRamalId);
		// }
	}

	public static void updateIaxRamal(IAXRamal iaxRamal) {
		updateIaxRamal(iaxRamal.getId(), iaxRamal);
	}

	public static void updateIaxRamal(String iaxRamalId, IAXRamal iaxRamal) {
		deleteIaxRamal(iaxRamalId);
		addIaxRamal(iaxRamal);
	}

	public static IAXRamal getIaxRamal(String iaxRamalId) {
		// if (fake) {
		for (IAXRamal iaxRamal : getIaxRamais()) {
			if (iaxRamal.isSame(iaxRamalId)) {
				return iaxRamal;
			}
		}
		return null;
		// } else {
		// String callerid = iax.getVariableValue(iaxRamalId, "callerid");
		// String type = iax.getVariableValue(iaxRamalId, "type");
		// String defaultuser = iax.getVariableValue(iaxRamalId, "defaultuser");
		// String secret = iax.getVariableValue(iaxRamalId, "secret");
		// String context = iax.getVariableValue(iaxRamalId, "context");
		// String host = iax.getVariableValue(iaxRamalId, "host");
		// String auth = iax.getVariableValue(iaxRamalId, "auth");
		// String transfer = iax.getVariableValue(iaxRamalId, "transfer");
		// String requiredcalltoken = iax.getVariableValue(iaxRamalId,
		// "requiredcalltoken");
		//
		// return new IAXRamal(iaxRamalId, callerid, type, defaultuser, secret,
		// context, host, auth, transfer, requiredcalltoken);
		// }
	}
}